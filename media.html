<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Pembelajaran Biologi & Lab Digital | Guru Biologi</title>
    <meta name="description"
        content="Galeri Media Pembelajaran Biologi interaktif dan Lab Digital. Koleksi infografis, video, dan alat peraga untuk mendukung Belajar Biologi SMA lebih mudah dan menyenangkan.">
    <meta name="keywords"
        content="Media Pembelajaran Biologi, Lab Digital, Alat Peraga Biologi, Video Biologi, Infografis Biologi">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://belajarbiologi.com/media.html">
    <meta property="og:title" content="Media Pembelajaran Biologi & Lab Digital | Guru Biologi">
    <meta property="og:description"
        content="Galeri Media Pembelajaran Biologi interaktif dan Lab Digital. Koleksi infografis, video, dan alat peraga.">
    <meta property="og:image" content="images/cell_division_infographic.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://belajarbiologi.com/media.html">
    <meta property="twitter:title" content="Media Pembelajaran Biologi & Lab Digital | Guru Biologi">
    <meta property="twitter:description"
        content="Galeri Media Pembelajaran Biologi interaktif dan Lab Digital. Koleksi infografis, video, dan alat peraga.">
    <meta property="twitter:image" content="images/cell_division_infographic.png">

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/theme-toggle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <header id="navbar-placeholder"></header>

    <main class="container">
        <!-- Section 1: Media Pembelajaran -->
        <section style="padding-bottom: 20px;">
            <h2 style="border-bottom: 2px solid var(--border-color); padding-bottom: 15px; margin-bottom: 30px;">Media
                Pembelajaran</h2>

            <!-- Dynamic Grid Container -->
            <div id="media-grid" class="grid-auto-fit">
                <p>Memuat media...</p>
            </div>

            <!-- Pagination Controls -->
            <div id="pagination-controls" style="margin-top: 40px; display: flex; justify-content: center; gap: 10px;">
                <!-- Buttons injected by JS -->
            </div>
        </section>
    </main>

    <footer id="footer-placeholder"></footer>
    <script src="js/main.js"></script>
    <script src="data/media-data.js"></script>
    <script>
        const ITEMS_PER_PAGE = 6;
        let currentPage = 1;

        document.addEventListener('DOMContentLoaded', () => {
            renderMedia(currentPage);
        });

        function renderMedia(page) {
            const container = document.getElementById('media-grid');
            const paginationContainer = document.getElementById('pagination-controls');

            if (typeof mediaPosts !== 'undefined' && Array.isArray(mediaPosts)) {
                // Calculate Paging
                const startIndex = (page - 1) * ITEMS_PER_PAGE;
                const endIndex = startIndex + ITEMS_PER_PAGE;
                const paginatedPosts = mediaPosts.slice(startIndex, endIndex);
                const totalPages = Math.ceil(mediaPosts.length / ITEMS_PER_PAGE);

                // Clear & Render Items
                container.innerHTML = '';

                if (paginatedPosts.length > 0) {
                    paginatedPosts.forEach(post => {
                        const card = document.createElement('article');
                        card.className = 'card-bg';
                        card.style.borderRadius = '10px';
                        card.style.overflow = 'hidden';
                        card.style.transition = 'transform 0.2s';

                        // Determine thumbnail
                        let thumbnailHtml = '';
                        if (post.isVideoInfo) {
                            thumbnailHtml = `
                                <div style="width: 100%; height: 200px; background: #000; display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fas fa-play-circle fa-3x"></i>
                                </div>
                            `;
                        } else {
                            thumbnailHtml = `
                                <img src="${post.image}" alt="${post.title}" style="width: 100%; height: 200px; object-fit: cover;">
                            `;
                        }

                        card.innerHTML = `
                            <a href="media-detail.html?id=${post.id}" style="text-decoration: none; color: inherit;">
                                ${thumbnailHtml}
                                <div style="padding: 20px;">
                                    <span style="font-size: 0.8rem; background: ${post.badgeColor}; color: ${post.badgeTextColor}; padding: 2px 8px; border-radius: 4px;">${post.category}</span>
                                    <h3 style="margin: 10px 0; font-size: 1.2rem;">${post.title}</h3>
                                    <p style="font-size: 0.9rem; color: var(--secondary-color); margin-bottom: 15px;">${post.description}</p>
                                    <span style="font-size: 0.9rem; color: var(--primary-color); font-weight: 500;">Lihat Detail <i class="fas fa-arrow-right"></i></span>
                                </div>
                            </a>
                        `;
                        container.appendChild(card);
                    });
                } else {
                    container.innerHTML = '<p>Tidak ada media ditemukan.</p>';
                }

                // Render Pagination Controls
                renderPaginationControls(paginationContainer, page, totalPages);

            } else {
                container.innerHTML = '<p>Gagal memuat data media.</p>';
            }
        }

        function renderPaginationControls(container, currentPage, totalPages) {
            container.innerHTML = '';

            if (totalPages <= 1) return;

            // Previous Button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'btn';
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i> Sebelumnya';
            prevBtn.style.backgroundColor = currentPage === 1 ? '#e9ecef' : 'var(--text-color)';
            prevBtn.style.color = currentPage === 1 ? '#999' : 'white';
            prevBtn.style.cursor = currentPage === 1 ? 'default' : 'pointer';
            prevBtn.disabled = currentPage === 1;
            prevBtn.onclick = () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderMedia(currentPage);
                    // Scroll to top of grid
                    document.getElementById('media-grid').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };
            container.appendChild(prevBtn);

            // Page Info
            const pageInfo = document.createElement('span');
            pageInfo.innerText = `Halaman ${currentPage} dari ${totalPages}`;
            pageInfo.style.alignSelf = 'center';
            pageInfo.style.fontWeight = '500';
            container.appendChild(pageInfo);

            // Next Button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'btn';
            nextBtn.innerHTML = 'Selanjutnya <i class="fas fa-chevron-right"></i>';
            nextBtn.style.backgroundColor = currentPage === totalPages ? '#e9ecef' : 'var(--text-color)';
            nextBtn.style.color = currentPage === totalPages ? '#999' : 'white';
            nextBtn.style.cursor = currentPage === totalPages ? 'default' : 'pointer';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.onclick = () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderMedia(currentPage);
                    document.getElementById('media-grid').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };
            container.appendChild(nextBtn);
        }
    </script>
</body>

</html>
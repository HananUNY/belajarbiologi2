<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publikasi & Karya | Guru Biologi Profesional</title>
    <meta name="description"
        content="Daftar publikasi ilmiah, penelitian tindakan kelas (PTK), dan buku karya guru biologi.">

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/theme-toggle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <header id="navbar-placeholder"></header>

    <main class="container">
        <section style="padding: 40px 0 20px 0;">
            <div
                style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 20px;">
                <div>
                    <h1>Publikasi & Karya</h1>
                    <p style="color: var(--secondary-color);">Jejak akademis dalam penelitian pendidikan dan literasi
                        sains.</p>
                </div>
                <a href="https://scholar.google.com/citations?user=2NspuT8AAAAJ&hl=id&oi=ao" target="_blank"
                    style="display: inline-flex; align-items: center; gap: 10px; padding: 10px 20px; border: 2px solid var(--border-color); border-radius: 8px; color: var(--text-color); font-weight: 600; text-decoration: none; transition: all 0.2s;">
                    <i class="fas fa-graduation-cap" style="font-size: 1.2rem;"></i>
                    <span>Google Scholar</span>
                </a>
            </div>
        </section>

        <!-- Books Section -->
        <section style="padding: 20px 0;">
            <h2>Buku Karya Saya</h2>
            <div id="books-container"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 30px; margin-top: 30px;">
                <!-- Injected via JS -->
                <p>Memuat data buku...</p>
            </div>
            <div id="books-pagination" style="display: flex; justify-content: center; gap: 10px; margin-top: 30px;">
            </div>
        </section>

        <!-- Research / PTK Section -->
        <section style="padding: 20px 0;">
            <h2>Jurnal & Penelitian (PTK)</h2>
            <div id="journals-container" style="margin-top: 20px;">
                <!-- Injected via JS -->
                <p>Memuat data jurnal...</p>
            </div>
            <div id="journals-pagination" style="display: flex; justify-content: center; gap: 10px; margin-top: 30px;">
            </div>
        </section>

    </main>

    <footer id="footer-placeholder"></footer>
    <script src="js/main.js"></script>
    <script src="data/publications-data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof publicationsData !== 'undefined') {
                const ITEMS_PER_PAGE = 4;
                let currentBookPage = 1;
                let currentJournalPage = 1;

                // --- Books Rendering ---
                function renderBooks(page) {
                    const booksContainer = document.getElementById('books-container');
                    const paginationContainer = document.getElementById('books-pagination');

                    if (!booksContainer || !publicationsData.books) return;

                    const totalItems = publicationsData.books.length;
                    const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);

                    // Validate page
                    if (page < 1) page = 1;
                    if (page > totalPages) page = totalPages;
                    currentBookPage = page;

                    // Slice data
                    const start = (page - 1) * ITEMS_PER_PAGE;
                    const end = start + ITEMS_PER_PAGE;
                    const itemsToShow = publicationsData.books.slice(start, end);

                    // Render Items
                    booksContainer.innerHTML = '';
                    itemsToShow.forEach(book => {
                        const article = document.createElement('article');
                        article.style.cssText = "display: flex; gap: 20px; border: 1px solid var(--border-color); padding: 20px; border-radius: 10px; background: var(--card-bg); height: 100%;";
                        article.innerHTML = `
                            <div style="width: 120px; flex-shrink: 0; background: #eee; height: 180px; display: flex; align-items: center; justify-content: center; color: #aaa; overflow: hidden;">
                                ${book.coverImage
                                ? `<img src="${book.coverImage}" alt="${book.title}" style="width: 100%; height: 100%; object-fit: cover;">`
                                : `<i class="fas ${book.coverIcon || 'fa-book'} fa-2x"></i>`
                            }
                            </div>
                            <div style="flex: 1; display: flex; flex-direction: column;">
                                <h3 style="font-size: 1.3rem; margin-bottom: 10px;">${book.title}</h3>
                                <p style="font-size: 0.9rem; color: var(--secondary-color); margin-bottom: 15px; flex-grow: 1;">
                                    ${book.description}
                                </p>
                                <div style="display: flex; gap: 10px;">
                                    <a href="${book.link}" class="btn">${book.action}</a>
                                    ${book.sampleLink ? `<a href="${book.sampleLink}" style="padding: 10px 20px; border: 1px solid var(--primary-color); color: var(--primary-color); border-radius: 5px; font-weight: 500;">Baca Sampel</a>` : ''}
                                </div>
                            </div>
                        `;
                        booksContainer.appendChild(article);
                    });

                    // Render Pagination
                    renderPagination(totalItems, ITEMS_PER_PAGE, page, paginationContainer, (newPage) => renderBooks(newPage));
                }

                // --- Journals Rendering ---
                function renderJournals(page) {
                    const journalsContainer = document.getElementById('journals-container');
                    const paginationContainer = document.getElementById('journals-pagination');

                    if (!journalsContainer || !publicationsData.journals) return;

                    const totalItems = publicationsData.journals.length;
                    const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);

                    if (page < 1) page = 1;
                    if (page > totalPages) page = totalPages;
                    currentJournalPage = page;

                    const start = (page - 1) * ITEMS_PER_PAGE;
                    const end = start + ITEMS_PER_PAGE;
                    const itemsToShow = publicationsData.journals.slice(start, end);

                    journalsContainer.innerHTML = '';
                    itemsToShow.forEach(journal => {
                        const article = document.createElement('article');
                        article.style.marginBottom = "30px";

                        let impactHtml = '';
                        if (journal.impact) {
                            impactHtml = `
                            <div style="background: var(--light-gray); padding: 10px; border-radius: 5px; font-size: 0.9rem; color: var(--primary-color); margin-bottom: 10px;">
                                <strong>Dampak Riset:</strong> ${journal.impact}
                            </div>
                            `;
                        }

                        article.innerHTML = `
                             <h3 style="font-size: 1.2rem; margin-bottom: 5px;">${journal.title}</h3>
                            <div style="font-size: 0.9rem; color: var(--secondary-color); margin-bottom: 10px;">
                                <i>${journal.journalName}</i>, ${journal.vol ? journal.vol + ',' : ''} ${journal.year}.
                            </div>
                            ${impactHtml}
                            <a href="${journal.link}" style="color: var(--primary-color); font-weight: 500;"><i class="fas fa-download"></i>
                                Download Abstrak / Full PDF</a>
                        `;
                        journalsContainer.appendChild(article);
                    });

                    renderPagination(totalItems, ITEMS_PER_PAGE, page, paginationContainer, (newPage) => renderJournals(newPage));
                }

                // --- Generic Pagination Control ---
                function renderPagination(totalItems, itemsPerPage, currentPage, container, onPageChange) {
                    container.innerHTML = '';
                    const totalPages = Math.ceil(totalItems / itemsPerPage);

                    if (totalPages <= 1) return;

                    // Prev Button
                    const prevBtn = document.createElement('button');
                    prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
                    prevBtn.className = 'pagination-btn'; // We can add styles for this class inline or in CSS
                    prevBtn.style.cssText = `padding: 8px 12px; border: 1px solid var(--border-color); background: ${currentPage === 1 ? 'var(--light-gray)' : 'var(--card-bg)'}; cursor: ${currentPage === 1 ? 'not-allowed' : 'pointer'}; border-radius: 5px;`;
                    prevBtn.disabled = currentPage === 1;
                    prevBtn.onclick = () => onPageChange(currentPage - 1);
                    container.appendChild(prevBtn);

                    // Page Numbers
                    for (let i = 1; i <= totalPages; i++) {
                        const pageBtn = document.createElement('button');
                        pageBtn.innerText = i;
                        pageBtn.style.cssText = `padding: 8px 12px; border: 1px solid var(--border-color); background: ${currentPage === i ? 'var(--primary-color)' : 'var(--card-bg)'}; color: ${currentPage === i ? '#fff' : 'var(--text-color)'}; cursor: pointer; border-radius: 5px;`;
                        pageBtn.onclick = () => onPageChange(i);
                        container.appendChild(pageBtn);
                    }

                    // Next Button
                    const nextBtn = document.createElement('button');
                    nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
                    nextBtn.style.cssText = `padding: 8px 12px; border: 1px solid var(--border-color); background: ${currentPage === totalPages ? 'var(--light-gray)' : 'var(--card-bg)'}; cursor: ${currentPage === totalPages ? 'not-allowed' : 'pointer'}; border-radius: 5px;`;
                    nextBtn.disabled = currentPage === totalPages;
                    nextBtn.onclick = () => onPageChange(currentPage + 1);
                    container.appendChild(nextBtn);
                }

                // Initial Render
                renderBooks(1);
                renderJournals(1);
            }
        });
    </script>
</body>

</html>